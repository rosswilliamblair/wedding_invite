<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Greek Gift Wedding Puzzle</title>
<style>
body { font-family: Arial; text-align:center; margin:2rem; }
#board {
  display:grid;
  grid-template-columns: repeat(8, 60px);
  grid-template-rows: repeat(8, 60px);
  border:2px solid #333;
  margin:0 auto;
  width:480px; height:480px;
}
.square { width:60px; height:60px; position:relative; }
.light { background:#f0d9b5; }
.dark { background:#b58863; }
.square.selected::after {
  content:"";
  position:absolute; top:0; left:0; width:100%; height:100%;
  background: rgba(128,128,128,0.4); /* grey overlay */
  pointer-events:none;
}
.piece { width:100%; height:100%; display:flex; align-items:center; justify-content:center; cursor:pointer; }
.piece img { width:80%; height:80%; pointer-events:none; }
#unlock { display:none; margin-top:2rem; font-size:1.2rem; color:green; }
.correct { box-shadow: 0 0 0 4px green inset; transition: box-shadow 0.5s; }
.wrong { box-shadow: 0 0 0 4px red inset; transition: box-shadow 0.5s; }
#message { margin-top:1rem; font-size:1rem; color:red; }
</style>
</head>
<body>

<h2>White to move: Find the winning move!</h2>
<p>Click a piece, then click a square to move it. The correct move reveals the wedding password!</p>

<div id="board"></div>
<div id="unlock">
ðŸŽ‰ Congratulations! The wedding password is: <strong>corfu2k26</strong>
</div>
<div id="message"></div>

<script>
const board = document.getElementById("board");

// Create 8x8 board
for(let r=8;r>=1;r--){
  for(let c=0;c<8;c++){
    const sq = document.createElement("div");
    sq.className = "square " + ((r+c)%2===0 ? "light":"dark");
    sq.dataset.square = String.fromCharCode(97+c)+r;
    board.appendChild(sq);
  }
}

// Initial positions
const initialPositions = [
  ["d3","bishop_white"],["b4","queen_white"],["b1","king_white"],["h2","rook_white"],
  ["a2","pawn_white"],["b2","pawn_white"],["c2","pawn_white"],["c1","rook_white"],
  ["g8","king_black"],["f8","rook_black"],["f7","pawn_black"],["g7","pawn_black"],["h7","pawn_black"],
  ["h8","knight_black"],["d8","knight_white"]
];

// Setup pieces
function setupPieces(){
  [...board.children].forEach(sq => sq.innerHTML="");
  initialPositions.forEach(pos => addPiece(pos[0],pos[1]));
  document.getElementById("unlock").style.display="none";
  document.getElementById("message").textContent="";
  selectedPiece = null;
  selectedSquare = null;
  [...document.querySelectorAll(".square")].forEach(sq => sq.classList.remove("selected"));
}

// Add a piece
function addPiece(square,type){
  const sq = [...board.children].find(s => s.dataset.square===square);
  const pieceDiv = document.createElement("div");
  pieceDiv.className="piece";
  pieceDiv.dataset.type = type;
  const img = document.createElement("img");
  img.src = type + ".png";
  pieceDiv.appendChild(img);
  sq.appendChild(pieceDiv);
}

// Initialize
setupPieces();

let selectedPiece = null;
let selectedSquare = null;

// Click-to-move
board.addEventListener("click", e => {
  // Find piece if clicked
  let piece = null;
  if(e.target.classList.contains("piece")) piece = e.target;
  else if(e.target.parentElement && e.target.parentElement.classList.contains("piece")) piece = e.target.parentElement;

  if(piece){
    // Deselect if already selected
    if(selectedPiece === piece){
      selectedPiece = null;
      selectedSquare.classList.remove("selected");
      selectedSquare = null;
      return;
    }
    // Select new piece
    if(selectedSquare) selectedSquare.classList.remove("selected");
    selectedPiece = piece;
    selectedSquare = piece.parentElement;
    selectedSquare.classList.add("selected");
    return;
  }

  // Clicked a square to move
  let square = e.target;
  while(square && !square.classList.contains("square")) square = square.parentElement;
  if(square && selectedPiece){
    square.innerHTML = "";
    square.appendChild(selectedPiece);

    // Check move
    if(selectedPiece.dataset.type === "bishop_white" && square.dataset.square === "h7"){
      document.getElementById("unlock").style.display = "block";
      square.classList.add("correct");
      setTimeout(()=>{ square.classList.remove("correct"); }, 1500);
    } else {
      square.classList.add("wrong");
      const funnyMessages = [
        "Whoops! Resetting the board for you.",
        "Nice imagination, terrible execution!",
        "Wrong move! Donâ€™t worry, even grandmasters fail."
      ];
      const msg = funnyMessages[Math.floor(Math.random()*funnyMessages.length)];
      document.getElementById("message").textContent = msg;
      setTimeout(()=>{
        square.classList.remove("wrong");
        setupPieces();
      }, 1200);
    }

    selectedSquare.classList.remove("selected");
    selectedPiece = null;
    selectedSquare = null;
  }
});
</script>
</body>
</html>
